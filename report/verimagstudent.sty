

\typeout{} 
\typeout{********************************************************************} 
\typeout{* verimagstudent.sty 03-03                                          } 
\typeout{* needs :                                                           }
\typeout{*                                                                   }
\typeout{* - class report or option titlepage.                               }
\typeout{*                                                                   }
\typeout{* should work with:                                                 }
\typeout{* - llncs, then def of institute must be changed into renewcommand  }
\typeout{*                                                                   }
\typeout{* PROVIDES COMMANDS :                                               }
\typeout{* shorttitle, abstract, institute, tutor,  reporttype ,             }
\typeout{* notes, keywords,                                                  }
\typeout{* maketitlepage (double titlepage for Verimag reports),             }
\typeout{* redefines maketitle (normal title may be repeated on page 3)      }
\typeout{*                                                                   }
\typeout{* already used packages:                                            }
\typeout{* a4wide, color, times, fancyhdr, graphicx, hyperref, lastpage      }
\typeout{*                                                                   }
\typeout{* maintained by Matthieu.Moy@imag.fr                                }
\typeout{********************************************************************}
\typeout{} 


\usepackage{a4wide}
\usepackage{color}
%\usepackage{times}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{eso-pic} %  background image

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Checks whether we are compiling under latex or pdflatex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% this might be eliminated as likely already input anyway
\ifx\pdftexversion\undefined
  \usepackage[dvips]{graphicx}
  \usepackage[dvips, backref, colorlinks, linkcolor=blue]{hyperref}
\else
  \usepackage[pdftex]{graphicx}
  \usepackage[pdftex, backref, colorlinks, linkcolor=blue]{hyperref}
\fi


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Commands for headers.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\definecolor{grey}{rgb}{0.5,0.5,0.5}
\definecolor{lightblue}{rgb}{0.25,0.35,0.45}
\definecolor{blue}{rgb}{0,0,1}


\newlength \headmargin 
\setlength \headmargin {1cm}
\addtolength \headmargin{-\oddsidemargin}
\addtolength \headmargin{-1in}
\addtolength \headmargin{-\hoffset}

\newlength \topsave
\setlength \topsave {1in}
\addtolength \topsave {-4cm}
\addtolength \topsave {-\topmargin}

\newlength \newfs
\setlength \newfs {\paperheight}
\addtolength \newfs {-6cm}
\addtolength \newfs {-\headsep}
\addtolength \newfs {-\textheight}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% headers
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}
\headheight 15pt
\footskip 30pt
\fancyhf{}

\fancyhead[LO, RE]{\color{grey} \theshorttitle}
\fancyhead[RO, LE]{\color{grey} \it \@author}

\fancyfoot[LO, RE]{\color{grey} \thereporttype}
\fancyfoot[RO, LE]{\color{grey} \thepage /\pageref{LastPage}}

\pagestyle{fancy}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% The first page style.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fancypagestyle{firstpage}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
  
  \headheight 3.25cm
  \headwidth 18cm
  \footskip 0cm % 35pt

  \fancyhead[L]{
    \hspace{\headmargin}
      \includegraphics[height=3cm]{images/logoverimag}
  }
  \fancyfoot[R]{
    % We can't change \textheight anymore since we already entered the
    % page.
    \vspace{-2.5cm}
      \begin{tabular}[b]{r}
	  {\@setfontsize\normalsize\@xiipt{14.5}
	    \sf \color{lightblue}
	   Unit\'e Mixte de Recherche 5104 CNRS - Grenoble-INP - UJF}\\
	  \@setfontsize\tiny\@vipt\@viipt 
	  \sf \color{lightblue}
	   \begin{tabular}[b]{l}
	      Centre Equation \\
	      2, avenue de VIGNATE \\
	      F-38610 GIERES \\
	      tel : +33 456 52 03 40 \\
	      fax : +33 456 52 03 50 \\
	      http://www-verimag.imag.fr \\
	    \end{tabular}
	\end{tabular}\hspace*{1.5cm}
        \\
	\includegraphics[height=1.5cm]{images/Ujf-80}
	\hspace{1.2cm}
	\includegraphics[height=1.5cm]{images/cnrs-80}
	\hspace{1.2cm}
	\includegraphics[height=1.5cm]{images/inpg}
	\hspace*{1.5cm}
  }
} %end fancypagestyle
    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Commands for building the first page.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand*{\shorttitle}[1]{
  \def\theshorttitle{#1}
}
\let\theshorttitle\relax

\newcommand*{\institute}[1]{
  \def\theinstitute{#1}
}
\let\theinstitute\relax

\renewcommand*{\abstract}[1]{
  \def\theabstract{#1}
}
\let\theabstract\relax

\newcommand*{\resume}[1]{
  \def\theresume{#1}
}
\let\thetutor\relax

\newcommand*{\tutor}[1]{
  \def\thetutor{#1}
}
\let\thetutor\relax

\newcommand*{\notes}[1]{
  \def\thenotes{#1}
}
\let\thenotes\relax

\newcommand*{\keywords}[1]{
  \def\thekeywords{#1}
}
\let\thekeywords\relax

\newcommand*{\motscles}[1]{
  \def\themotscles{#1}
}
\let\themotscles\relax

\newcommand*{\reporttype}[1]{
  \def\thereporttype{#1}
}
\let\thereporttype\relax

\newcommand*{\webaddress}[1]{
  \def\thewebaddress{#1}
}
\let\thewebaddress\relax

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% The first 2 pages pages produced by maktitle
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  
\newcommand\BackgroundPic{
\put(0,0){%
\parbox[b][\paperheight]{\paperwidth}{%
\vfill%
\centering%
\includegraphics[width=\paperwidth,height=\paperheight]{background.jpg}%
\vfill%
}}}

\newcommand{\maketitlepage} {
  \AddToShipoutPicture*{\BackgroundPic}

  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  % The first page
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  \addtolength{\topmargin}{\topsave}
  \thispagestyle{firstpage}
  \vspace*{3cm}
  \begin{center} 
 
   \fbox{ 
     \begin{minipage}{0.8\textwidth}
       \begin{center}
    	 { \@setfontsize\LARGE\@xxpt{25} \bf 

	   \bigskip

	   {\scshape \@title}  

	   \bigskip
	   \bigskip
	   \@setfontsize\large\@xivpt{18} {\it \@author }

	   \bigskip\bigskip

           \thereporttype }

	 \bigskip\bigskip

	 \@setfontsize\large\@xivpt{18} \@date

	 \bigskip   
      \end{center}
     \end{minipage}
   } %end fbox
 
   \vspace{3cm}
      
   e-mail:\\

   %%%% ici il faudrait que ce soit un lien cliquable

   \href{\thewebaddress}{\tt \thewebaddress}\\
	
	\vspace{1cm}
	Tutors: \\ {\scshape \thetutor} \\
  \end{center}

  \newpage

  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  % The second  page.
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  \addtolength{\topmargin}{-\topsave}

  \thispagestyle{empty}
   % ici un maketitle a la LNCS, avec institute et email address y tout
   \begin{center}
     {\Large \bf \scshape  \@title}

     \bigskip

	 {\large \it  \@author}\\

	 \bigskip

	 \theinstitute

	 \bigskip\bigskip

	 \@date
   \end{center}

   \bigskip \bigskip
   \begin{center}{\bf Abstract} \end{center}
   \begin{quote}\theabstract\end{quote}

   \begin{center}{\bf R\'esum\'e} \end{center}
   \begin{quote}\theresume\end{quote}

     \bigskip 

     \noindent {\bf Keywords}: \thekeywords 
	 
	 \bigskip
     
	 \noindent {\bf Mots Cl\'es}: \themotscles

     \bigskip
     \noindent {\bf Tutors}: \thetutor

     \ifx\thenotes\empty 
     \else
     \bigskip
     \noindent {\bf Notes}: \thenotes
     \fi

     \bigskip\bigskip

     \setcounter{page}{0}
     \newpage

} %end maketitlepage


\renewcommand{\maketitle}{
  \begin{center}
    {\Large \bf \@title}

    \bigskip\bigskip

	{\it \@author}\\

	\bigskip

	\theinstitute

	\bigskip

	\@date
  \end{center}

   
  \begin{quote}
    {\small {\bf Abstract}: \theabstract}
    {\small {\bf R\'esum\'e}: \theresume}
  \end{quote}
} %end maketitle


\AtBeginDocument{
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  % Required because our pdflatex builds on letter papersize
  % May not be needed elsewhere.

%  \@ifundefined{pdfoutput}{}{
%  \pdfpageheight=29.7cm
%  \pdfpagewidth=21cm
%  }
}
